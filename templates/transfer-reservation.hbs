<!DOCTYPE html>
<html lang="{{__meta.locale}}" dir="{{__meta.direction}}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{t "transferReservation.title"}}</title>
    {{> styles}}
</head>

<body>
    <div class="container">
        <center>
            {{> header}}

            <!-- Main Card -->
            <table width="600" cellpadding="0" cellspacing="0" class="main-card">
                <tr>
                    <td>
                        <!-- Greeting -->
                        <h2 style="margin: 0 0 10px; color: #000000;">{{t "transferReservation.greeting" guestName=(or customerName contactName cardHolder passengers.[0].name passengers.[0].firstName "Guest")}}</h2>
                        <p style="margin: 0 0 22px; color: #333333; font-size: 14px;">{{t "transferReservation.confirmed"}}</p>

                        <div style="border-top: 1px solid #EEEEEE; margin-bottom: 30px;"></div>

                        <!-- Transfer Details -->
                        <h3>
                            <!-- Truck Icon (SVG) -->
                            <img src="https://api.iconify.design/ph:truck.svg" alt="Transfer" width="20" height="20"
                                style="vertical-align: middle; margin-{{__meta.oppositeAlign}}: 8px;">
                            {{t "transferReservation.title"}}
                        </h3>
                        <p style="margin: 0 0 12px; font-size: 13px; color: #666666;">
                            {{t "transferReservation.passengerCount"}}: {{or totalGuestCount passengerCount "-"}} |
                            {{t "transferReservation.date"}}: {{or (formatDate meetingDate) (formatDate date) (formatDate pickupDate) "-"}} |
                            {{t "transferReservation.time"}}: {{or meetingTime time pickupTime "-"}} |
                            {{t "transferReservation.meetingPoint"}}: {{or meetingPoint meetingLocation meetingPointName pickupLocation from "-"}}
                        </p>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th style="width: 15%;">{{t "transferReservation.direction"}}</th>
                                    <th style="width: 40%;">{{t "transferReservation.route"}}</th>
                                    <th style="width: 25%;">{{t "transferReservation.vehicleType"}}</th>
                                    <th style="width: 20%;">{{t "transferReservation.duration"}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#if transfers}}
                                {{#each transfers}}
                                <tr>
                                    <td>
                                        {{#if direction}}
                                        {{#if (equalsIgnoreCase direction "departure")}}
                                        {{t "flightTicket.departure"}}
                                        {{else}}
                                        {{#if (equalsIgnoreCase direction "return")}}
                                        {{t "flightTicket.return"}}
                                        {{else}}
                                        {{direction}}
                                        {{/if}}
                                        {{/if}}
                                        {{else}}
                                        {{#if @first}}
                                        {{t "flightTicket.departure"}}
                                        {{else}}
                                        {{t "flightTicket.return"}}
                                        {{/if}}
                                        {{/if}}
                                    </td>
                                    <td>{{or route (concat (or pickupLocation from "-") " â†’ " (or dropoffLocation to "-"))}}</td>
                                    <td>{{or vehicleType vehicle "-"}}</td>
                                    <td>{{or duration transferDuration "-"}}</td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="font-size: 12px; color: #666666;">
                                        {{t "transferReservation.date"}}: {{or (formatDate pickupDate) (formatDate date) (formatDate meetingDate) (formatDate transferDate) "-"}} |
                                        {{t "transferReservation.time"}}: {{or pickupTime time meetingTime transferTime "-"}} |
                                        {{t "transferReservation.meetingPoint"}}: {{or meetingPoint meetingLocation meetingPointName pickupLocation from "-"}} |
                                        {{t "transferReservation.pickupLocation"}}: {{or pickupLocation from "-"}} |
                                        {{t "transferReservation.dropoffLocation"}}: {{or dropoffLocation to "-"}} |
                                        {{t "transferReservation.passengerCount"}}: {{or passengerCount paxCount totalGuestCount ../passengerCount ../totalGuestCount "-"}}
                                    </td>
                                </tr>
                                {{/each}}
                                {{else}}
                                <tr>
                                    <td>{{t "flightTicket.departure"}}</td>
                                    <td>{{or pickupLocation "-"}} &rarr; {{or dropoffLocation "-"}}</td>
                                    <td>{{or vehicleType "-"}}</td>
                                    <td>{{or duration "-"}}</td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="font-size: 12px; color: #666666;">
                                        {{t "transferReservation.date"}}: {{or (formatDate date) (formatDate pickupDate) (formatDate meetingDate) (formatDate transferDate) "-"}} |
                                        {{t "transferReservation.time"}}: {{or time pickupTime meetingTime transferTime "-"}} |
                                        {{t "transferReservation.meetingPoint"}}: {{or meetingPoint meetingLocation meetingPointName pickupLocation "-"}} |
                                        {{t "transferReservation.pickupLocation"}}: {{or pickupLocation "-"}} |
                                        {{t "transferReservation.dropoffLocation"}}: {{or dropoffLocation "-"}} |
                                        {{t "transferReservation.passengerCount"}}: {{or passengerCount totalGuestCount "-"}}
                                    </td>
                                </tr>
                                {{#if (or returnPickupLocation returnDropoffLocation returnDate returnTime returnVehicleType returnDuration)}}
                                <tr>
                                    <td>{{t "flightTicket.return"}}</td>
                                    <td>{{or returnPickupLocation pickupLocation "-"}} &rarr; {{or returnDropoffLocation dropoffLocation "-"}}</td>
                                    <td>{{or returnVehicleType vehicleType "-"}}</td>
                                    <td>{{or returnDuration duration "-"}}</td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="font-size: 12px; color: #666666;">
                                        {{t "transferReservation.date"}}: {{or (formatDate returnDate) (formatDate returnMeetingDate) "-"}} |
                                        {{t "transferReservation.time"}}: {{or returnTime returnMeetingTime "-"}} |
                                        {{t "transferReservation.meetingPoint"}}: {{or returnMeetingPoint returnMeetingLocation returnMeetingPointName returnPickupLocation pickupLocation "-"}} |
                                        {{t "transferReservation.pickupLocation"}}: {{or returnPickupLocation pickupLocation "-"}} |
                                        {{t "transferReservation.dropoffLocation"}}: {{or returnDropoffLocation dropoffLocation "-"}} |
                                        {{t "transferReservation.passengerCount"}}: {{or returnPassengerCount returnTotalGuestCount passengerCount totalGuestCount "-"}}
                                    </td>
                                </tr>
                                {{/if}}
                                {{/if}}
                            </tbody>
                        </table>

                        <!-- Passenger Information -->
                        <h3>{{t "common.passengerInfo"}}</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>{{t "common.passengerName"}}</th>
                                    <th>{{t "common.surname"}}</th>
                                    <th>{{t "common.birthDate"}}</th>
                                    <th>{{t "common.nationality"}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each passengers}}
                                <tr>
                                    <td>{{name}}</td>
                                    <td>{{surname}}</td>
                                    <td>{{formatDate birthDate}}</td>
                                    <td>{{nationality}}</td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>

                        <!-- Payment Details -->
                        <h3>{{t "common.paymentDetails"}}</h3>
                        <table class="data-table">
                            {{#each priceItems}}
                            <tr>
                                <td style="width: 70%; font-weight: 500;">{{label}}</td>
                                <td style="text-align: right; background-color: #FFFFFF;">{{formatCurrency amount
                                    ../currency}}</td>
                            </tr>
                            {{/each}}
                            <tr>
                                <td style="background-color: #FAFAFA; color: #333333; font-weight: 700;">{{t
                                    "common.totalPrice"}}</td>
                                <td
                                    style="background-color: #FAFAFA; color: #333333; font-weight: 800; text-align: right;">
                                    {{formatCurrency totalAmount currency}}</td>
                            </tr>
                        </table>

                        {{> payment-info}}

                        <!-- Important Info Box -->
                        <div style="background-color: #FFF8E1; border-radius: 6px; padding: 20px; margin-bottom: 30px;">
                            <h4 style="margin: 0 0 10px; color: #6F4C0D; font-size: 16px; font-weight: 800;">
                                {{t "common.importantInfo"}}
                            </h4>
                            <ul
                                style="margin: 0; padding-{{__meta.align}}: 20px; color: #5A4318; font-size: 13px; line-height: 1.6;">
                                <li>{{t "common.infoLine1"}}</li>
                                <li>{{t "common.infoLine2"}}</li>
                            </ul>
                        </div>

                        <!-- Button -->
                        {{> button url=(or manageBookingUrl ticketUrl modifyUrl reservationUrl bookingUrl '#') text=(t "common.viewTicket") }}

                    </td>
                </tr>
            </table>

            {{> footer}}
        </center>
    </div>
</body>

</html>
